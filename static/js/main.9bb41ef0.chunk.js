(this["webpackJsonpreenbit-chat"]=this["webpackJsonpreenbit-chat"]||[]).push([[0],{36:function(e,a,t){e.exports=t(75)},41:function(e,a,t){},48:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},54:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var s={};t.r(s),t.d(s,"changeChat",(function(){return E})),t.d(s,"sendMessage",(function(){return p}));var r=t(0),n=t.n(r),c=t(13),o=t.n(c),l=(t(41),t(16)),i=(t(48),t(8)),u=t(12),m=t(9),d=t.n(m),h=(t(50),function(e){var a,t,s,r=e.chats,c=e.chooseChat,o=e.searchedMessages,l=e.searchedUsers,i=Array.from(r).sort((function(e,a){return a.messageHistory[a.messageHistory.length-1].date.localeCompare(e.messageHistory[e.messageHistory.length-1].date)}));return l&&(a=l.map((function(e){var a=e.messageHistory.length-1;return n.a.createElement("div",{class:"chats__dialog",onClick:function(){return c(e.userId)},key:e.userId},n.a.createElement("div",{class:"dialog__photo",style:{backgroundImage:"url(".concat(e.userImg,")")}}),n.a.createElement("div",{class:"dialog__name-message"},n.a.createElement("div",{class:"dialog__name"},e.username),n.a.createElement("div",{class:"dialog__message"},"".concat(e.messageHistory[a].isAuthor?"You: ":"").concat(e.messageHistory[a].text))),n.a.createElement("div",{class:"dialog__date"},n.a.createElement("span",null,d()(e.messageHistory[a].date).format("MMM D,YYYY"))))}))),o&&(t=o.map((function(e){return e.messageHistory.map((function(a){return n.a.createElement("div",{class:"chats__dialog",onClick:function(){return c(e.userId)},key:e.userId},n.a.createElement("div",{class:"dialog__photo",style:{backgroundImage:"url(".concat(e.userImg,")")}}),n.a.createElement("div",{class:"dialog__name-message"},n.a.createElement("div",{class:"dialog__name"},e.username),n.a.createElement("div",{class:"dialog__message"},"".concat(a.isAuthor?"You: ":"").concat(a.text))),n.a.createElement("div",{class:"dialog__date"},n.a.createElement("span",null,d()(a.date).format("MMM D,YYYY"))))}))}))),o||l||(s=i.map((function(e){var a=e.messageHistory.length-1;return n.a.createElement("div",{class:"chats__dialog",onClick:function(){return c(e.userId)},key:e.userId},n.a.createElement("div",{class:"dialog__photo",style:{backgroundImage:"url(".concat(e.userImg,")")}}),n.a.createElement("div",{class:"dialog__name-message"},n.a.createElement("div",{class:"dialog__name"},e.username),n.a.createElement("div",{class:"dialog__message"},"".concat(e.messageHistory[a].isAuthor?"You: ":"").concat(e.messageHistory[a].text))),n.a.createElement("div",{class:"dialog__date"},n.a.createElement("span",null,d()(e.messageHistory[a].date).format("MMM D,YYYY"))))}))),n.a.createElement("div",{class:"chats"},n.a.createElement("div",{class:"chats__header"},n.a.createElement("span",null,"Chats")),s,!!a&&n.a.createElement("p",null,"Contacts:"),a,!!t&&n.a.createElement("p",null,"Messages:"),t)}),g=(t(51),function(e){var a=e.chat,t=e.sendMessage,s=e.selectedChatId,c=e.messageHistory,o=Object(r.useRef)(null);if(Object(r.useEffect)((function(){o.current.scrollIntoView({behavior:"auto",block:"nearest",inline:"start"})}),[s]),Object(r.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),[c]),null===a)return n.a.createElement("div",{class:"chat"},n.a.createElement("div",{class:"chat__empty",ref:o},n.a.createElement("p",{class:"chat__empty-text"},"Please select a chat to start messaging")));var l=a.messageHistory.length-1,i=a.messageHistory.map((function(e,t){return e.isAuthor?n.a.createElement("div",{class:"chat-history__message_self",key:e.messageId},n.a.createElement("div",{class:"chat-history__message-photo_self"}),n.a.createElement("div",{class:"chat-history__message-wrapper"},n.a.createElement("div",{class:"chat-history__message-text_self"},n.a.createElement("span",null,e.text)),n.a.createElement("div",{class:"chat-history__date"},n.a.createElement("span",{class:"chat-history__date_self"},d()(e.date).format("M/DD/YY LT")))),l===t&&n.a.createElement("div",{ref:o,class:"ref"})):n.a.createElement("div",{class:"chat-history__message",key:e.messageId},n.a.createElement("div",{class:"chat-history__message-photo",style:{backgroundImage:"url(".concat(a.userImg,")")}}),n.a.createElement("div",{class:"chat-history__message-wrapper"},n.a.createElement("div",{class:"chat-history__message-text"},n.a.createElement("span",null,e.text)),n.a.createElement("div",{class:"chat-history__date"},n.a.createElement("span",null,d()(e.date).format("M/DD/YY LT")))),l===t&&n.a.createElement("div",{ref:o,class:"ref"}))}));return n.a.createElement("div",{class:"chat"},n.a.createElement("div",{class:"chat-header"},n.a.createElement("div",{class:"chat-header__photo",style:{backgroundImage:"url(".concat(a.userImg,")")}}),n.a.createElement("div",{class:"chat-header__name"},n.a.createElement("span",null,a.username))),n.a.createElement("div",{class:"chat-history"},i),n.a.createElement(f,{sendMessage:t,userId:a.userId}))}),_=(t(52),function(e){var a=e.handleSearch,t=e.searchChatValue;return n.a.createElement("div",{class:"search-chat"},n.a.createElement("div",{class:"search-chat__my-photo"}),n.a.createElement("div",{class:"search-chat__panel"},n.a.createElement("input",{type:"text",placeholder:"Search or start new chat",class:"search-chat__input",value:t,onChange:function(e){return a(e)}})))}),f=(t(53),function(e){var a=e.sendMessage,t=e.userId,s=Object(r.useState)(),c=Object(u.a)(s,2),o=c[0],l=c[1];return n.a.createElement("div",null,n.a.createElement("div",{class:"send-message__panel"},n.a.createElement("textarea",{class:"send-message__input",placeholder:"Type your message",value:o,onChange:function(e){l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(a(t,o),l(""),e.preventDefault())}})))}),E=function(e){return{type:"CHANGE_CHAT",payload:{userId:e}}},p=function(e,a){return{type:"SEND_MESSAGE",payload:{userId:e,message:a}}},v=(t(54),Object(i.a)({},s)),b=Object(l.b)((function(e){return{chats:e.chat.chats,selectedChatId:e.chat.selectedChatId}}),v)((function(e){var a,t,s=e.chats,c=e.sendMessage,o=Object(r.useState)(""),l=Object(u.a)(o,2),m=l[0],d=l[1],f=Object(r.useState)(""),E=Object(u.a)(f,2),p=E[0],v=E[1];m?(a=s.map((function(e){var a=e.messageHistory.filter((function(e){return e.text.includes(m)}));return Object(i.a)({},e,{messageHistory:a})})),t=s.filter((function(e){return e.username.includes(m)}))):(a=null,t=null);var b=s.filter((function(e){return e.userId===p}))[0];return n.a.createElement("div",{class:"main"},n.a.createElement("div",{class:"left-side"},n.a.createElement(_,{handleSearch:function(e){d(e.target.value)},searchChatValue:m}),n.a.createElement(h,{chats:s,chooseChat:function(e){v(e)},searchedMessages:a,searchedUsers:t})),n.a.createElement("div",{class:"right-side"},n.a.createElement(g,{selectedChatId:p,messageHistory:null===b||void 0===b?void 0:b.messageHistory,chat:b||null,sendMessage:c})))})),y=function(){return n.a.createElement(b,null)},I=t(5),S=t(35),O=t(21),j=t(20),w={chats:[{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37341",userImg:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80",username:"Alice Freeman",messageHistory:[{messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37342",text:"yoy are the worst",isAuthor:!1,date:"2020-10-01T21:21:27.413Z"},{messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37343",text:"yes i know",isAuthor:!0,date:"2020-10-01T21:21:28.413Z"}]},{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37140",userImg:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",username:"Josefina",messageHistory:[{messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37141",text:"We are losing money! Quick!",isAuthor:!1,date:"2020-10-01T20:21:27.413Z"}]},{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37141",userImg:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Donald_Trump_official_portrait.jpg/1200px-Donald_Trump_official_portrait.jpg",username:"Donald Trump",messageHistory:[{messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37141",text:"Just vote!",isAuthor:!1,date:"2020-10-01T20:21:27.413Z"}]}],isChatting:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0,t=a.type,s=a.payload;switch(t){case"CHANGE_CHAT":return Object(i.a)({},e,{isChatting:!0,selectedChatId:s.userId});case"SEND_MESSAGE_SUCCESS":var r=s.userId,n=s.message,c={messageId:Object(j.v4)(),text:n,isAuthor:!0,date:(new Date).toISOString()},o=e.chats.map((function(e){return e.userId!==r?e:Object(i.a)({},e,{messageHistory:[].concat(Object(O.a)(e.messageHistory),[c])})}));return Object(i.a)({},e,{chats:o});case"GET_RANDOM_ANSWER_SUCCESS":var l=s.userId,u=s.message,m={messageId:Object(j.v4)(),text:u,isAuthor:!1,date:(new Date).toISOString()},d=e.chats.map((function(e){return e.userId!==l?e:Object(i.a)({},e,{messageHistory:[].concat(Object(O.a)(e.messageHistory),[m])})}));return Object(i.a)({},e,{chats:d});default:return e}},C=Object(I.c)({chat:x}),M=t(6),H=t.n(M),k=t(7),D=t(34),A=t.n(D);var Y=function(e,a){return e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e+1))+e},T=H.a.mark(U),N=H.a.mark(J),G=H.a.mark(R);function U(e){var a,t,s;return H.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.payload,r.next=3,Object(k.d)({type:"SEND_MESSAGE_SUCCESS",payload:a});case 3:return r.next=5,Object(k.b)(A.a.get,"https://api.chucknorris.io/jokes/random");case 5:return t=r.sent,s=t.data.value,r.next=9,Object(k.c)(1e3*Y(10,15));case 9:return r.next=11,Object(k.d)({type:"GET_RANDOM_ANSWER_SUCCESS",payload:{userId:a.userId,message:s}});case 11:case"end":return r.stop()}}),T)}function J(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)("SEND_MESSAGE",U);case 2:case"end":return e.stop()}}),N)}function R(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([J()]);case 2:case"end":return e.stop()}}),G)}var V=H.a.mark(W);function W(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([R()]);case 2:case"end":return e.stop()}}),V)}var L=Object(S.a)(),X=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},Z=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):I.d)(Object(I.a)(L)),B=Object(I.e)(C,X,Z);B.subscribe((function(){localStorage.setItem("reduxState",JSON.stringify(B.getState()))})),L.run(W);var P=B;var Q=function(){return n.a.createElement(l.a,{store:P},n.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.9bb41ef0.chunk.js.map